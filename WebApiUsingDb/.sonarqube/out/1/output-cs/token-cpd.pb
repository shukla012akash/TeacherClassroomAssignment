›
NC:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\ApiModel\ClassroomApiModel.cs
	namespace 	
WebApiDB
 
. 
ApiModel 
{ 
public 

class 
ClassroomApiModel "
{ 
public 
int 
ClassId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
? 
Name 
{ 
get !
;! "
set# &
;& '
}( )
} 
} Ø
XC:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\ApiModel\TeacherandClassroomApiModel.cs
	namespace 	
WebApiDB
 
. 
ApiModel 
{ 
public 

class '
TeacherandClassroomApiModel ,
{ 
public 
TeacherApiModel 
Teacher &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
List 
< 
ClassroomApiModel $
>$ %

Classrooms& 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
} 
}		 ì
LC:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\ApiModel\TeacherApiModel.cs
	namespace 	
WebApiDB
 
. 
ApiModel 
{ 
public 

class 
TeacherApiModel  
{ 
public 
int 
	TeacherId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
TeacherName "
{# $
get% (
;( )
set* -
;- .
}/ 0
public		 
string		 
?		 
TeacherAddress		 %
{		& '
get		( +
;		+ ,
set		- 0
;		0 1
}		2 3
} 
} ˛:
RC:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\Controllers\EmployeeController.cs
	namespace 	
WebApiDB
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
EmployeeController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
DemoDbContext &
_context' /
;/ 0
public 
EmployeeController !
(! "
DemoDbContext" /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Employee3 ;
>; <
>< =
>= >
GetEmployees? K
(K L
)L M
{ 	
if
 
( 
_context 
. 
	Employees  
==! #
null$ (
)( )
{
 
return 
NotFound 
( 
) 
;  
}
 
return   
await   
_context   !
.  ! "
	Employees  " +
.  + ,
ToListAsync  , 7
(  7 8
)  8 9
;  9 :
}!! 	
[$$ 	
HttpGet$$	 
($$ 
$str$$ 
)$$ 
]$$ 
public%% 
async%% 
Task%% 
<%% 
ActionResult%% &
<%%& '
Employee%%' /
>%%/ 0
>%%0 1
GetEmployee%%2 =
(%%= >
int%%> A
id%%B D
)%%D E
{&& 	
if''
 
('' 
_context'' 
.'' 
	Employees''  
==''! #
null''$ (
)''( )
{((
 
return)) 
NotFound)) 
()) 
))) 
;))  
}**
 
var++ 
employee++ 
=++ 
await++  
_context++! )
.++) *
	Employees++* 3
.++3 4
	FindAsync++4 =
(++= >
id++> @
)++@ A
;++A B
if-- 
(-- 
employee-- 
==-- 
null--  
)--  !
{.. 
return// 
NotFound// 
(//  
)//  !
;//! "
}00 
return22 
employee22 
;22 
}33 	
[77 	
HttpPut77	 
(77 
$str77 
)77 
]77 
public88 
async88 
Task88 
<88 
IActionResult88 '
>88' (
PutEmployee88) 4
(884 5
int885 8
id889 ;
,88; <
Employee88= E
employee88F N
)88N O
{99 	
if:: 
(:: 
id:: 
!=:: 
employee:: 
.:: 
Id:: !
)::! "
{;; 
return<< 

BadRequest<< !
(<<! "
)<<" #
;<<# $
}== 
_context?? 
.?? 
Entry?? 
(?? 
employee?? #
)??# $
.??$ %
State??% *
=??+ ,
EntityState??- 8
.??8 9
Modified??9 A
;??A B
tryAA 
{BB 
awaitCC 
_contextCC 
.CC 
SaveChangesAsyncCC /
(CC/ 0
)CC0 1
;CC1 2
}DD 
catchEE 
(EE (
DbUpdateConcurrencyExceptionEE /
)EE/ 0
{FF 
ifGG 
(GG 
!GG 
EmployeeExistsGG #
(GG# $
idGG$ &
)GG& '
)GG' (
{HH 
returnII 
NotFoundII #
(II# $
)II$ %
;II% &
}JJ 
elseKK 
{LL 
throwMM 
;MM 
}NN 
}OO 
returnQQ 
	NoContentQQ 
(QQ 
)QQ 
;QQ 
}RR 	
[VV 	
HttpPostVV	 
]VV 
publicWW 
asyncWW 
TaskWW 
<WW 
ActionResultWW &
<WW& '
EmployeeWW' /
>WW/ 0
>WW0 1
PostEmployeeWW2 >
(WW> ?
EmployeeWW? G
employeeWWH P
)WWP Q
{XX 	
ifYY
 
(YY 
_contextYY 
.YY 
	EmployeesYY  
==YY! #
nullYY$ (
)YY( )
{ZZ
 
return[[ 
Problem[[ 
([[ 
$str[[ M
)[[M N
;[[N O
}\\
 
_context]] 
.]] 
	Employees]] 
.]] 
Add]] "
(]]" #
employee]]# +
)]]+ ,
;]], -
await^^ 
_context^^ 
.^^ 
SaveChangesAsync^^ +
(^^+ ,
)^^, -
;^^- .
return`` 
CreatedAtAction`` "
(``" #
$str``# 0
,``0 1
new``2 5
{``6 7
id``8 :
=``; <
employee``= E
.``E F
Id``F H
}``I J
,``J K
employee``L T
)``T U
;``U V
}aa 	
[dd 	

HttpDeletedd	 
(dd 
$strdd 
)dd 
]dd 
publicee 
asyncee 
Taskee 
<ee 
IActionResultee '
>ee' (
DeleteEmployeeee) 7
(ee7 8
intee8 ;
idee< >
)ee> ?
{ff 	
ifgg 
(gg 
_contextgg 
.gg 
	Employeesgg "
==gg# %
nullgg& *
)gg* +
{hh 
returnii 
NotFoundii 
(ii  
)ii  !
;ii! "
}jj 
varkk 
employeekk 
=kk 
awaitkk  
_contextkk! )
.kk) *
	Employeeskk* 3
.kk3 4
	FindAsynckk4 =
(kk= >
idkk> @
)kk@ A
;kkA B
ifll 
(ll 
employeell 
==ll 
nullll  
)ll  !
{mm 
returnnn 
NotFoundnn 
(nn  
)nn  !
;nn! "
}oo 
_contextqq 
.qq 
	Employeesqq 
.qq 
Removeqq %
(qq% &
employeeqq& .
)qq. /
;qq/ 0
awaitrr 
_contextrr 
.rr 
SaveChangesAsyncrr +
(rr+ ,
)rr, -
;rr- .
returntt 
	NoContenttt 
(tt 
)tt 
;tt 
}uu 	
privateww 
boolww 
EmployeeExistsww #
(ww# $
intww$ '
idww( *
)ww* +
{xx 	
returnyy 
(yy 
_contextyy 
.yy 
	Employeesyy &
?yy& '
.yy' (
Anyyy( +
(yy+ ,
eyy, -
=>yy. 0
eyy1 2
.yy2 3
Idyy3 5
==yy6 8
idyy9 ;
)yy; <
)yy< =
.yy= >
GetValueOrDefaultyy> O
(yyO P
)yyP Q
;yyQ R
}zz 	
}{{ 
}|| €:
RC:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\Controllers\StudentsController.cs
	namespace 	
WebApiDB
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
StudentsController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
DemoDbContext &
_context' /
;/ 0
public 
StudentsController !
(! "
DemoDbContext" /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Student3 :
>: ;
>; <
>< =
GetStudents> I
(I J
)J K
{ 	
if
 
( 
_context 
. 
Students 
==  "
null# '
)' (
{
 
return 
NotFound 
( 
) 
;  
}
 
return   
await   
_context   !
.  ! "
Students  " *
.  * +
ToListAsync  + 6
(  6 7
)  7 8
;  8 9
}!! 	
[$$ 	
HttpGet$$	 
($$ 
$str$$ 
)$$ 
]$$ 
public%% 
async%% 
Task%% 
<%% 
ActionResult%% &
<%%& '
Student%%' .
>%%. /
>%%/ 0

GetStudent%%1 ;
(%%; <
int%%< ?
id%%@ B
)%%B C
{&& 	
if''
 
('' 
_context'' 
.'' 
Students'' 
==''  "
null''# '
)''' (
{((
 
return)) 
NotFound)) 
()) 
))) 
;))  
}**
 
var++ 
student++ 
=++ 
await++ 
_context++  (
.++( )
Students++) 1
.++1 2
	FindAsync++2 ;
(++; <
id++< >
)++> ?
;++? @
if-- 
(-- 
student-- 
==-- 
null-- 
)--  
{.. 
return// 
NotFound// 
(//  
)//  !
;//! "
}00 
return22 
student22 
;22 
}33 	
[77 	
HttpPut77	 
(77 
$str77 
)77 
]77 
public88 
async88 
Task88 
<88 
IActionResult88 '
>88' (

PutStudent88) 3
(883 4
int884 7
id888 :
,88: ;
Student88< C
student88D K
)88K L
{99 	
if:: 
(:: 
id:: 
!=:: 
student:: 
.:: 
Id::  
)::  !
{;; 
return<< 

BadRequest<< !
(<<! "
)<<" #
;<<# $
}== 
_context?? 
.?? 
Entry?? 
(?? 
student?? "
)??" #
.??# $
State??$ )
=??* +
EntityState??, 7
.??7 8
Modified??8 @
;??@ A
tryAA 
{BB 
awaitCC 
_contextCC 
.CC 
SaveChangesAsyncCC /
(CC/ 0
)CC0 1
;CC1 2
}DD 
catchEE 
(EE (
DbUpdateConcurrencyExceptionEE /
)EE/ 0
{FF 
ifGG 
(GG 
!GG 
StudentExistsGG "
(GG" #
idGG# %
)GG% &
)GG& '
{HH 
returnII 
NotFoundII #
(II# $
)II$ %
;II% &
}JJ 
elseKK 
{LL 
throwMM 
;MM 
}NN 
}OO 
returnQQ 
	NoContentQQ 
(QQ 
)QQ 
;QQ 
}RR 	
[VV 	
HttpPostVV	 
]VV 
publicWW 
asyncWW 
TaskWW 
<WW 
ActionResultWW &
<WW& '
StudentWW' .
>WW. /
>WW/ 0
PostStudentWW1 <
(WW< =
StudentWW= D
studentWWE L
)WWL M
{XX 	
ifYY
 
(YY 
_contextYY 
.YY 
StudentsYY 
==YY  "
nullYY# '
)YY' (
{ZZ
 
return[[ 
Problem[[ 
([[ 
$str[[ L
)[[L M
;[[M N
}\\
 
_context]] 
.]] 
Students]] 
.]] 
Add]] !
(]]! "
student]]" )
)]]) *
;]]* +
await^^ 
_context^^ 
.^^ 
SaveChangesAsync^^ +
(^^+ ,
)^^, -
;^^- .
return`` 
CreatedAtAction`` "
(``" #
$str``# /
,``/ 0
new``1 4
{``5 6
id``7 9
=``: ;
student``< C
.``C D
Id``D F
}``G H
,``H I
student``J Q
)``Q R
;``R S
}aa 	
[dd 	

HttpDeletedd	 
(dd 
$strdd 
)dd 
]dd 
publicee 
asyncee 
Taskee 
<ee 
IActionResultee '
>ee' (
DeleteStudentee) 6
(ee6 7
intee7 :
idee; =
)ee= >
{ff 	
ifgg 
(gg 
_contextgg 
.gg 
Studentsgg !
==gg" $
nullgg% )
)gg) *
{hh 
returnii 
NotFoundii 
(ii  
)ii  !
;ii! "
}jj 
varkk 
studentkk 
=kk 
awaitkk 
_contextkk  (
.kk( )
Studentskk) 1
.kk1 2
	FindAsynckk2 ;
(kk; <
idkk< >
)kk> ?
;kk? @
ifll 
(ll 
studentll 
==ll 
nullll 
)ll  
{mm 
returnnn 
NotFoundnn 
(nn  
)nn  !
;nn! "
}oo 
_contextqq 
.qq 
Studentsqq 
.qq 
Removeqq $
(qq$ %
studentqq% ,
)qq, -
;qq- .
awaitrr 
_contextrr 
.rr 
SaveChangesAsyncrr +
(rr+ ,
)rr, -
;rr- .
returntt 
	NoContenttt 
(tt 
)tt 
;tt 
}uu 	
privateww 
boolww 
StudentExistsww "
(ww" #
intww# &
idww' )
)ww) *
{xx 	
returnyy 
(yy 
_contextyy 
.yy 
Studentsyy %
?yy% &
.yy& '
Anyyy' *
(yy* +
eyy+ ,
=>yy- /
eyy0 1
.yy1 2
Idyy2 4
==yy5 7
idyy8 :
)yy: ;
)yy; <
.yy< =
GetValueOrDefaultyy= N
(yyN O
)yyO P
;yyP Q
}zz 	
}{{ 
}|| –g
QC:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\Controllers\TeacherController.cs
	namespace 	
WebApiDB
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
TeacherController "
:# $
ControllerBase% 3
{ 
private 
readonly 
DemoDbContext &
_context' /
;/ 0
private 
readonly 
IMapper  
_mapper! (
;( )
public 
TeacherController  
(  !
DemoDbContext! .
context0 7
,7 8
IMapper9 @
mapperA G
)G H
{ 	
_context 
= 
context 
; 
_mapper 
= 
mapper 
; 
} 	
[ 	
HttpGet	 
] 
[!! 	
HttpGet!!	 
]!! 
public"" 
ActionResult"" 
GetAllTeachers"" *
(""* +
)""+ ,
{## 	
if%% 
(%% 
_context%% 
.%% 
Teachers%% !
==%%" $
null%%% )
)%%) *
{&& 
return'' 
NotFound'' 
(''  
)''  !
;''! "
}(( 
var)) 
Alldetailsofteacher)) #
=))$ %
_context))& .
.)). /
Teachers))/ 7
.))7 8
Include))8 ?
())? @
cl))@ B
=>))C E
cl))F H
.))H I

classrooms))I S
)))S T
.))T U
ToList))U [
())[ \
)))\ ]
;))] ^
return++ 
Ok++ 
(++ 
Alldetailsofteacher++ )
)++) *
;++* +
},, 	
[00 	
HttpGet00	 
(00 
$str00 
)00 
]00 
public11 
async11 
Task11 
<11 
ActionResult11 &
<11& ''
TeacherandClassroomApiModel11' B
>11B C
>11C D

GetTeacher11E O
(11O P
int11P S
id11T V
)11V W
{22 	
if33 
(33 
_context33 
.33 
Teachers33 !
==33" $
null33% )
)33) *
{44 
return55 
NotFound55 
(55  
)55  !
;55! "
}66 
else77 
{88 '
TeacherandClassroomApiModel99 +'
teacherandClassroomApiModel99, G
=99H I
new99J M
(99M N
)99N O
;99O P
TeacherApiModel:: 
teacherApiModel::  /
=::0 1
new::2 5
(::5 6
)::6 7
;::7 8
List;; 
<;; 
ClassroomApiModel;; &
>;;& '"
classroomApiModelsList;;' =
=;;> ?
new;;@ C
List;;D H
<;;H I
ClassroomApiModel;;I Z
>;;Z [
(;;[ \
);;\ ]
;;;] ^
var<< 
teacher<< 
=<< 
await<< "
_context<<# +
.<<+ ,
Teachers<<, 4
.<<4 5
	FindAsync<<5 >
(<<> ?
id<<? A
)<<A B
;<<B C
var== 
	classroom== 
=== 
_context==  (
.==( )

Classrooms==) 3
.==3 4
Where==4 9
(==9 :
x==: ;
=>==; =
x=== >
.==> ?
Teacher==? F
.==F G
	TeacherId==G P
====P R
id==R T
)==T U
.==U V
ToList==V \
(==\ ]
)==] ^
;==^ _
teacherApiModel@@ 
=@@ 
_mapper@@ %
.@@% &
Map@@& )
<@@) *
TeacherApiModel@@* 9
>@@9 :
(@@: ;
teacher@@; B
)@@B C
;@@C D"
classroomApiModelsListAA "
=AA# $
_mapperAA% ,
.AA, -
MapAA- 0
<AA0 1
ListAA1 5
<AA5 6
ClassroomApiModelAA6 G
>AAG H
>AAH I
(AAI J
	classroomAAJ S
)AAS T
;AAT U'
teacherandClassroomApiModelBB '
.BB' (
TeacherBB( /
=BB0 1
teacherApiModelBB2 A
;BBA B'
teacherandClassroomApiModelCC '
.CC' (

ClassroomsCC( 2
=CC2 3"
classroomApiModelsListCC3 I
;CCI J
returnDD '
teacherandClassroomApiModelDD .
;DD. /
}FF 	
}HH 
[LL 	
HttpPutLL	 
]LL 
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (

PutTeacherMM) 3
(MM3 4
intMM4 7
idMM8 :
,MM; <'
TeacherandClassroomApiModelMM= X'
teacherAndClassroomApiModelMMY t
)MMt u
{NN 	
varOO 
teacherOO 
=OO 
_contextOO "
.OO" #
TeachersOO# +
.OO+ ,
FindOO, 0
(OO0 1
idOO1 3
)OO3 4
;OO4 5
ifPP 
(PP 
teacherPP 
==PP 
nullPP 
)PP  
{QQ 
returnRR 
NotFoundRR 
(RR  
)RR  !
;RR! "
}SS 
elseTT 
{UU 
varVV 
objVV 
=VV 
_mapperVV !
.VV! "
MapVV" %
<VV% &
TeacherVV& -
>VV- .
(VV. /'
teacherAndClassroomApiModelVV/ J
.VVJ K
TeacherVVK R
)VVR S
;VVS T
varWW 

classroomsWW 
=WW  
_mapperWW! (
.WW( )
MapWW) ,
<WW, -
ListWW- 1
<WW1 2
	ClassroomWW2 ;
>WW; <
>WW< =
(WW= >'
teacherAndClassroomApiModelWW> Y
.WWY Z

ClassroomsWWZ d
)WWd e
;WWe f
varYY 
updateTeacherYY !
=YY" #
_contextYY$ ,
.YY, -
TeachersYY- 5
.YY5 6
WhereYY6 ;
(YY; <
tYY< =
=>YY> @
tYYA B
.YYB C
	TeacherIdYYC L
==YYM O
idYYP R
)YYR S
.YYS T
IncludeYYT [
(YY[ \
cYY\ ]
=>YY^ `
cYYa b
.YYb c

classroomsYYc m
)YYm n
.YYn o
FirstOrDefaultYYo }
(YY} ~
)YY~ 
;	YY Ä
updateTeacher[[ 
.[[ 
TeacherName[[ )
=[[* +
teacher[[, 3
.[[3 4
TeacherName[[4 ?
;[[? @
updateTeacher\\ 
.\\ 
TeacherAddress\\ ,
=\\- .
teacher\\/ 6
.\\6 7
TeacherAddress\\7 E
;\\E F
updateTeacher]] 
.]] 

classrooms]] (
=]]) *

classrooms]]+ 5
;]]5 6
_context^^ 
.^^ 
Update^^ 
(^^  
updateTeacher^^  -
)^^- .
;^^. /
_context__ 
.__ 
SaveChanges__ $
(__$ %
)__% &
;__& '
return`` 
Ok`` 
(`` 
)`` 
;`` 
}aa 
}cc 	
[hh 	
HttpPosthh	 
]hh 
publicii 
asyncii 
Taskii 
<ii 
ActionResultii &
<ii& '
Teacherii' .
>ii. /
>ii/ 0
PostTeacherii1 <
(ii< ='
TeacherandClassroomApiModelii= X'
teacherandClassroomApiModeliiY t
)iit u
{jj 	
ifkk
 
(kk 
_contextkk 
.kk 
Teacherskk 
==kk  "
nullkk# '
)kk' (
{ll
 
returnmm 
Problemmm 
(mm 
$strmm L
)mmL M
;mmM N
}nn
 
varrr 
objrr 
=rr 
_mapperrr 
.rr 
Maprr !
<rr! "
Teacherrr" )
>rr) *
(rr* +'
teacherandClassroomApiModelrr+ F
.rrF G
TeacherrrG N
)rrN O
;rrO P
varuu 

classroomsuu 
=uu 
_mapperuu #
.uu# $
Mapuu$ '
<uu' (
Listuu( ,
<uu, -
	Classroomuu- 6
>uu6 7
>uu7 8
(uu8 9'
teacherandClassroomApiModeluu9 T
.uuT U

ClassroomsuuU _
)uu_ `
;uu` a
objww 
.ww 

classroomsww 
=ww 

classroomsww '
;ww' (
_contextxx 
.xx 
Teachersxx 
.xx 
Addxx !
(xx! "
objxx" %
)xx% &
;xx& '
_contextyy 
.yy 
SaveChangesyy  
(yy  !
)yy! "
;yy" #
returnzz 
Okzz 
(zz 
)zz 
;zz 
}{{ 	
[~~ 	

HttpDelete~~	 
(~~ 
$str~~ 
)~~ 
]~~ 
public 
async 
Task 
< 
IActionResult '
>' (
DeleteTeacher) 6
(6 7
int7 :
id; =
)= >
{
ÄÄ 	
var
ÅÅ 
teacher
ÅÅ 
=
ÅÅ 
_context
ÅÅ "
.
ÅÅ" #
Teachers
ÅÅ# +
.
ÅÅ+ ,
Where
ÅÅ, 1
(
ÅÅ1 2
x
ÅÅ2 3
=>
ÅÅ4 6
x
ÅÅ7 8
.
ÅÅ8 9
	TeacherId
ÅÅ9 B
==
ÅÅC E
id
ÅÅF H
)
ÅÅH I
.
ÅÅI J
FirstOrDefault
ÅÅJ X
(
ÅÅX Y
)
ÅÅY Z
;
ÅÅZ [
if
ÇÇ 
(
ÇÇ 
teacher
ÇÇ 
!=
ÇÇ 
null
ÇÇ 
)
ÇÇ  
{
ÉÉ 
_context
ÑÑ 
.
ÑÑ 
Teachers
ÑÑ !
.
ÑÑ! "
Remove
ÑÑ" (
(
ÑÑ( )
teacher
ÑÑ) 0
)
ÑÑ0 1
;
ÑÑ1 2
await
ÖÖ 
_context
ÖÖ 
.
ÖÖ 
SaveChangesAsync
ÖÖ /
(
ÖÖ/ 0
)
ÖÖ0 1
;
ÖÖ1 2
return
ÜÜ 
Ok
ÜÜ 
(
ÜÜ 
)
ÜÜ 
;
ÜÜ 
}
áá 
else
àà 
{
ââ 
return
ää 
NotFound
ää 
(
ää  
)
ää  !
;
ää! "
}
ãã 
}
åå 	
[
çç 	
	HttpPatch
çç	 
(
çç 
$str
çç 
)
çç 
]
çç 
public
éé 
async
éé 
Task
éé 
<
éé 
ActionResult
éé &
>
éé& '
PatchTeacher
éé( 4
(
éé4 5
string
éé5 ;
Name
éé< @
,
éé@ A
string
ééB H
Address
ééI P
,
ééP Q
int
ééR U
id
ééV X
)
ééX Y
{
èè 	
var
êê )
teacherNameAndAddressUpdate
êê +
=
êê, -
_context
êê. 6
.
êê6 7
Teachers
êê7 ?
.
êê? @
Where
êê@ E
(
êêE F
t
êêF G
=>
êêH J
t
êêK L
.
êêL M
	TeacherId
êêM V
==
êêW Y
id
êêZ \
)
êê\ ]
.
êê] ^
FirstOrDefault
êê^ l
(
êêl m
)
êêm n
;
êên o
if
ëë 
(
ëë )
teacherNameAndAddressUpdate
ëë +
==
ëë, .
null
ëë/ 3
)
ëë3 4
{
íí 
return
ìì 

BadRequest
ìì !
(
ìì! "
)
ìì" #
;
ìì# $
}
îî )
teacherNameAndAddressUpdate
ïï '
.
ïï' (
TeacherName
ïï( 3
=
ïï4 5
Name
ïï6 :
;
ïï: ;)
teacherNameAndAddressUpdate
ññ '
.
ññ' (
TeacherAddress
ññ( 6
=
ññ7 8
Address
ññ9 @
;
ññ@ A
_context
óó 
.
óó 
Update
óó 
(
óó )
teacherNameAndAddressUpdate
óó 7
)
óó7 8
;
óó8 9
await
òò 
_context
òò 
.
òò 
SaveChangesAsync
òò +
(
òò+ ,
)
òò, -
;
òò- .
return
ôô 
Ok
ôô 
(
ôô 
$str
ôô "
)
ôô" #
;
ôô# $
}
öö 	
private
ùù 
bool
ùù 
TeacherExists
ùù "
(
ùù" #
int
ùù# &
id
ùù' )
)
ùù) *
{
ûû 	
return
üü 
(
üü 
_context
üü 
.
üü 
Teachers
üü %
?
üü% &
.
üü& '
Any
üü' *
(
üü* +
e
üü+ ,
=>
üü- /
e
üü0 1
.
üü1 2
	TeacherId
üü2 ;
==
üü< >
id
üü? A
)
üüA B
)
üüB C
.
üüC D
GetValueOrDefault
üüD U
(
üüU V
)
üüV W
;
üüW X
}
†† 	
}
°° 
}¢¢ ∏
YC:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\Controllers\WeatherForecastController.cs
	namespace 	
WebApiDB
 
. 
Controllers 
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private		 
static		 
readonly		 
string		  &
[		& '
]		' (
	Summaries		) 2
=		3 4
new		5 8
[		8 9
]		9 :
{

 	
$str 
, 
$str 
, 
$str '
,' (
$str) /
,/ 0
$str1 7
,7 8
$str9 ?
,? @
$strA H
,H I
$strJ O
,O P
$strQ ]
,] ^
$str_ j
} 
; 
private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
] 
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
return 

Enumerable 
. 
Range #
(# $
$num$ %
,% &
$num' (
)( )
.) *
Select* 0
(0 1
index1 6
=>7 9
new: =
WeatherForecast> M
{ 
Date 
= 
DateTime 
.  
Now  #
.# $
AddDays$ +
(+ ,
index, 1
)1 2
,2 3
TemperatureC 
= 
Random %
.% &
Shared& ,
., -
Next- 1
(1 2
-2 3
$num3 5
,5 6
$num7 9
)9 :
,: ;
Summary 
= 
	Summaries #
[# $
Random$ *
.* +
Shared+ 1
.1 2
Next2 6
(6 7
	Summaries7 @
.@ A
LengthA G
)G H
]H I
} 
) 
. 
ToArray 
( 
) 
; 
} 	
}   
}!! ê
ZC:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\MappingConfiguration\AutoMapperProfile.cs
	namespace 	
WebApiDB
 
.  
MappingConfiguration '
{ 
public 

class 
AutoMapperProfile "
:" #
Profile# *
{ 
private		 
readonly		 
IMapper		  
_mapper		! (
;		( )
public

 
AutoMapperProfile

  
(

  !
)

! "
{ 	
	CreateMap 
< 
Teacher 
, 
TeacherApiModel .
>. /
(/ 0
)0 1
.1 2

ReverseMap2 <
(< =
)= >
;> ?
;@ A
	CreateMap 
< 
	Classroom 
,  
ClassroomApiModel! 2
>2 3
(3 4
)4 5
.5 6

ReverseMap6 @
(@ A
)A B
;B C
} 	
} 
} ‚
;C:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddDbContext 
< 
DemoDbContext +
>+ ,
(, -
options- 4
=>5 7
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC Z
)Z [
??\ ^
throw 	
new
 %
InvalidOperationException '
(' (
$str( ^
)^ _
)_ `
)` a
;a b
builder 
. 
Services 
. 
AddAutoMapper 
( 
typeof %
(% &
Program& -
)- .
). /
;/ 0
builder 
. 
Services 
. 
AddControllers 
(  
)  !
. 
AddJsonOptions 
( 
options 
=> 
options &
.& '!
JsonSerializerOptions' <
.< =
ReferenceHandler= M
=N O
ReferenceHandlerP `
.` a
IgnoreCyclesa m
)m n
;n o
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app   
.   
UseSwaggerUI   
(   
)   
;   
}!! 
app## 
.## 
Run## 
(## 
)## 	
;##	 
‘
CC:\Users\ANI\source\repos\WebApiUsingDb\WebApiDB\WeatherForecast.cs
	namespace 	
WebApiDB
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} 